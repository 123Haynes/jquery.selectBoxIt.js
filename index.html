<html>
    <head>
        <link type="text/css" rel="stylesheet" href="src/stylesheets/jquery.selectBoxIt.css" />

        <script src="http://codeorigin.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js"></script>
        <script src="src/javascripts/jquery.selectBoxIt.js"></script>

        <style type="text/css">
            /* Hide <select> elements, since we're going to show SelectBoxIt widgets instead.
                This avoids a "flicker" while the standard <select> elements are replaced. */
            select {
                display: none; /* An alternate workaround is to remove this style */
            }
        </style>

        <script>
            $(function() {

                // Initialize a single <select>, where 'this' refers to the select.
                function initSelect() {

                    // My workaround.  Uncomment this.
                    // if ($(this).html() == "") {
                    //     return;
                    // }

                    $(this).selectBoxIt({});
                }

                // Initialize all the selects present on the page when it first loads.
                $('select').each(initSelect);

                // Define a hook to automatically initialize widgets anytime they are  
                // initialized via jQuery('<div>...</div>').  This happens via jQuery's 
                // parseHTML function, so we create a wrapper for it.
                var oldParseHTML = $.parseHTML;
                $.parseHTML = function() {
                    var result = oldParseHTML.apply(this, arguments);
                    $(result).filter('select').each(initSelect);
                    return result;
                }

                $('#add-select').click(function() {
                    // Add another <select> to the page.  It should be instantiated automatically, 
                    // using the hook defined above.
                    var html = "<div>Also, what's your favorite number?</div><select><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option></select>";
                    $(html).appendTo($('#container'));
                    return false;
                });

                $('#clear-selects').click(function() {
                    // Clear the container that has the original <select>.  Kaboom!
                    $('#container').html('');
                    return false;
                });
            });

        </script>
    </head>
    <body>
        <button id="add-select">Add Select</button>
        <button id="clear-selects">Clear Selects</button>
        <br><br>

        <div id="container">
            <div>Who's your favorite Princess Bride character?<div>
            <select>
                <option value="wesley">Wesley</option>
                <option value="buttercup">Buttercup</option>
                <option value="inigo">Inigo Montoya</option>
            </select>
        </div>

    </body>
</html>